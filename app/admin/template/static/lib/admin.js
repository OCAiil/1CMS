layui.define("view",function(D){var i=layui.jquery,e=layui.laytpl,f=layui.element,C=layui.setter,o=layui.view,x=layui.device(),r=i(window),u=i("body"),p=i("#"+C.container),h="layui-show",z="layui-hide",m="layui-this",B="layui-disabled",g="template",l="#LAY_app_body",j="LAY_app_flexible",w="layadmin-layout-tabs",t="layadmin-side-spread-sm",a="layadmin-tabsbody-item",s="layui-icon-shrink-right",d="layui-icon-spread-left",c="layadmin-side-shrink",y="LAY-system-side-menu",n={v:"2020 std",req:o.req,exit:o.exit,escape:function(E){return String(E||"").replace(/&(?!#?[a-zA-Z0-9]+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")},on:function(E,F){return layui.onevent.call(this,C.MOD_NAME,E,F)},screen:function(){var E=r.width();if(E>1200){return 3}else{if(E>992){return 2}else{if(E>768){return 1}else{return 0}}}},autosize:function(){var E=r.width();if(E>1200){return"35%"}else{if(E>992){return"55%"}else{if(E>768){return"75%"}else{return"95%"}}}},autoprevnextbutton:function(){var E=0;i("#LAY_app_tabsheader li").each(function(){E=E+i(this).outerWidth()});if(E>i("#LAY_app_tabsheader").width()-30){i("#leftPage").show();i("#rightPage").show();i("#LAY_app_tabs").removeClass("LAY_app_tabs_noleftright")}else{i("#leftPage").hide();i("#rightPage").hide();i("#LAY_app_tabs").addClass("LAY_app_tabs_noleftright")}},popup:function(F,G,E){if(!F){return}if(!G){G=" "}if(!E){E={}}if(!E.hasOwnProperty("width")){if(layui.$(window).width()<900){E.width=layui.$(window).width()}else{E.width=880}}if(!E.hasOwnProperty("height")){if(layui.$(window).height()<700){E.height=layui.$(window).height()}else{E.height=680}}return n.popup.index=layer.open(i.extend({type:2,title:G,shadeClose:true,area:[E.width+"px",E.height+"px"],content:F},E))},popupRight:function(E){return n.popup.index=layer.open(i.extend({type:1,id:"LAY_adminPopupR",anim:-1,title:false,closeBtn:false,offset:"r",shade:0.1,shadeClose:true,skin:"layui-anim layui-anim-rl layui-layer-adminRightmenu",area:"200px"},E))},load:o.load,loaded:o.loaded,sideFlexible:function(E){var H=p,G=i("#"+j),F=n.screen();if(E==="spread"){G.removeClass(d).addClass(s);if(F<2){H.addClass(t)}else{H.removeClass(t)}H.removeClass(c)}else{G.removeClass(s).addClass(d);if(F<2){H.removeClass(c)}else{H.addClass(c)}H.removeClass(t)}layui.event.call(this,C.MOD_NAME,"side({*})",{status:E})},tabsPage:{},tabsBody:function(E){return i(l).find("."+a).eq(E||0)},tabsBodyChange:function(F,E){E=E||{};n.tabsBody(F).addClass(h).siblings().removeClass(h);b.rollPage("auto",F);layui.event.call(this,C.MOD_NAME,"tabsPage({*})",{url:E.url,text:E.text});n.autoprevnextbutton()},resize:function(G){var E=layui.router(),F=E.path.join("-");if(n.resizeFn[F]){r.off("resize",n.resizeFn[F]);delete n.resizeFn[F]}if(G==="off"){return}G(),n.resizeFn[F]=G;r.on("resize",n.resizeFn[F])},resizeFn:{},runResize:function(){var E=layui.router(),F=E.path.join("-");n.resizeFn[F]&&n.resizeFn[F]()},delResize:function(){this.resize("off")},closeThisTabs:function(){if(!n.tabsPage.index){return}i(A).eq(n.tabsPage.index).find(".layui-tab-close").trigger("click");n.autoprevnextbutton()},fullScreen:function(){var E=document.documentElement,F=E.requestFullScreen||E.webkitRequestFullScreen||E.mozRequestFullScreen||E.msRequestFullscreen;if(typeof F!=="undefined"&&F){F.call(E)}},exitScreen:function(){var E=document.documentElement;if(document.exitFullscreen){document.exitFullscreen()}else{if(document.mozCancelFullScreen){document.mozCancelFullScreen()}else{if(document.webkitCancelFullScreen){document.webkitCancelFullScreen()}else{if(document.msExitFullscreen){document.msExitFullscreen()}}}}}};var b=n.events={flexible:function(G){var F=G.find("#"+j),E=F.hasClass(d);n.sideFlexible(E?"spread":null)},refresh:function(){var E=".layadmin-iframe",G=i("."+a).length;if(n.tabsPage.index>=G){n.tabsPage.index=G-1}var F=n.tabsBody(n.tabsPage.index).find(E);if(F.length==0){layui.admin.events.reload();return}i(".layui-nav-item a[layadmin-event=refresh] i").addClass("layui-anim layui-anim-rotate layui-anim-loop");F[0].contentWindow.location.reload(true);F[0].onload=function(){setTimeout(function(){i(".layui-nav-item a[layadmin-event=refresh] i").removeClass("layui-anim layui-anim-rotate layui-anim-loop")},800)}},logout:function(){layui.admin.req({type:"post",url:"?do=admin:logout",async:true,done:function(E){if(E.link){window.location.href=E.link;return}window.location.href=window.location.pathname;return}})},loadmenu:function(){layui.admin.req({type:"post",url:"?do=admin:loadMenu",async:true,done:function(E){i("#LAY-system-side-menu",top.document).html(E.left);i("#LAY-system-user-menu",top.document).html(E.user);i("#LAY-system-ico-menu",top.document).html(E.ico);top.layui.element.render("nav");return}})},fullscreen:function(G){var H="layui-icon-screen-full",E="layui-icon-screen-restore",F=G.children("i");if(F.hasClass(H)){n.fullScreen();F.addClass(E).removeClass(H)}else{n.exitScreen();F.addClass(H).removeClass(E)}},right_menu:function(){n.popupRight({id:"LAY_adminPopupAbout",content:"test",area:"250px"})},popup:function(F){attributes=F[0].getAttributeNames();layerattr={};for(var E=0;E<attributes.length;E++){if(attributes[E].substring(0,6)==="popup-"){attrname=attributes[E].substring(6);if(attrname=="btnalign"){attrname="btnAlign"}if(attrname=="closebtn"){attrname="closeBtn"}if(attrname=="shadeclose"){attrname="shadeClose"}if(attrname=="maxheight"){attrname="maxHeight"}if(attrname=="maxwidth"){attrname="maxWidth"}if(attrname=="zindex"){attrname="zIndex"}if(attrname=="minstack"){attrname="minStack"}layerattr[attrname]=F[0].getAttribute(attributes[E]);if(layerattr[attrname]==="false"){layerattr[attrname]=false}if(layerattr[attrname]==="true"){layerattr[attrname]=true}if(layerattr[attrname]==="0"){layerattr[attrname]=0}if(layerattr[attrname]==="-1"){layerattr[attrname]=-1}if(layerattr[attrname]==="1"){layerattr[attrname]=1}if(layerattr[attrname]==="2"){layerattr[attrname]=2}if(layerattr[attrname]==="3"){layerattr[attrname]=3}if(layerattr[attrname]==="4"){layerattr[attrname]=4}if(layerattr[attrname]==="5"){layerattr[attrname]=5}if(layerattr[attrname]==="6"){layerattr[attrname]=6}if(layerattr[attrname]==="7"){layerattr[attrname]=7}if(layerattr[attrname]==="8"){layerattr[attrname]=8}if(layerattr[attrname]==="9"){layerattr[attrname]=9}}}layui.admin.popup(F.attr("href"),F.attr("title")?F.attr("title"):F.text(),layerattr)},back:function(){if(i("#cms-breadcrumb a[href]:last").length>0&&i("#cms-breadcrumb a[href]:last").attr("href").length>0){window.location.href=i("#cms-breadcrumb a[href]:last").attr("href");return}if(parent.layer.getFrameIndex(window.name)){parent.layer.close(parent.layer.getFrameIndex(window.name))}},reload:function(){window.location.reload()},top_pannel:function(){i(".top_pannel").toggle()},rollPage:function(I,F){var H=i("#LAY_app_tabsheader"),L=H.children("li"),E=H.prop("scrollWidth"),K=H.outerWidth(),G=parseFloat(H.css("left"));if(I==="left"){if(!G&&G<=0){return}var J=-G-K;L.each(function(N,O){var M=i(O),P=M.position().left;if(P>=J){H.css("left",-P);return false}})}else{if(I==="auto"){(function(){var N=L.eq(F),O;if(!N[0]){return}O=N.position().left;if(O<-G){return H.css("left",-O)}if(O+N.outerWidth()>=K-G){var M=O+N.outerWidth()-(K-G);L.each(function(Q,R){var P=i(R),S=P.position().left;if(S+G>0){if(S-G>M){H.css("left",-S);return false}}})}}())}else{L.each(function(N,O){var M=i(O),P=M.position().left;if(P+M.outerWidth()>=K-G){H.css("left",-P);return false}})}}},leftPage:function(){b.rollPage("left")},rightPage:function(){b.rollPage()},closeThisTabs:function(){var E=parent===self?n:parent.layui.admin;E.closeThisTabs();n.autoprevnextbutton()},closeOtherTabs:function(F){var E="LAY-system-pagetabs-remove";if(F==="all"){i(A+":gt(0)").remove();i(l).find("."+a+":gt(0)").remove();i(A).eq(0).trigger("click")}else{i(A).each(function(G,H){if(G&&G!=n.tabsPage.index){i(H).addClass(E);n.tabsBody(G).addClass(E)}});i("."+E).remove()}n.autoprevnextbutton()},closeAllTabs:function(){b.closeOtherTabs("all");n.autoprevnextbutton()},shade:function(){n.sideFlexible()},change_input:function(){if(typeof(i(this).attr("set-text"))!="undefined"){i('input[name="'+i(this).attr("input-name")+'"]').eq(0).val(i(this).attr("set-text"))}if(typeof(i(this).attr("add-text"))!="undefined"){i('input[name="'+i(this).attr("input-name")+'"]').eq(0).val(i('input[name="'+i(this).attr("input-name")+'"]').eq(0).val()+i(this).attr("add-text"))}return true},cms_tips:function(){content=i("#"+i(this).attr("data-id")).eq(0).html();if(typeof(i(this).attr("data-title"))!="undefined"){title=i(this).attr("data-title")}else{title=""}layer.open({type:1,title:title,shade:0.2,area:[n.autosize()],shadeClose:true,skin:"cms_tips_layer",content:content});return true}};!function(){if(!("pageTabs" in layui.setter)){layui.setter.pageTabs=false}if(typeof(window.pageTabs)!="undefined"){layui.setter.pageTabs=window.pageTabs}if(C.pageTabs){i("#LAY_app_tabs").addClass(h);p.removeClass("layadmin-tabspage-none")}i("#LAY-system-side-menu").on("click","span.layui-nav-more",function(E){E.stopPropagation()});i(document).keydown(function(E){if(E.which==13&&E.ctrlKey){i('body button[lay-filter="form-submit"]').click();E.preventDefault()}if(E.which==83&&E.ctrlKey){i('body button[lay-filter="form-submit"]').click();E.preventDefault()}else{if(E.which==27){layui.layer.closeAll();E.preventDefault()}else{if(E.which==8&&E.ctrlKey){layui.admin.events.back();E.preventDefault()}}}})}();i(window.parent.document).find(".layui-nav-item a[layadmin-event=refresh] i").removeClass("layui-anim layui-anim-rotate layui-anim-loop");window.addEventListener("beforeunload",function(E){i(window.parent.document).find(".layui-nav-item a[layadmin-event=refresh] i").addClass("layui-anim layui-anim-rotate layui-anim-loop")});if(typeof(window.adminIndex)!="undefined"&&window.adminIndex){layui.$("iframe.layadmin-iframe").on("load",function(){layui.$(".layui-nav-item a[layadmin-event=refresh] i").removeClass("layui-anim layui-anim-rotate layui-anim-loop")});if(typeof MutationObserver!=="undefined"){const v=new MutationObserver(function(E){E.forEach(function(F){layui.$(F.addedNodes).find("iframe").each(function(){layui.$(this).on("load",function(){layui.$(".layui-nav-item a[layadmin-event=refresh] i").removeClass("layui-anim layui-anim-rotate layui-anim-loop")})})})});v.observe(document.body,{childList:true,subtree:true})}}f.on("tab("+w+")",function(E){n.tabsPage.index=E.index});n.on("tabsPage(setMenustatus)",function(H){var F=H.url,E=function(K){return{list:K.children(".layui-nav-child"),a:K.children("*[lay-href]")}},J=i("#"+y),I="layui-nav-itemed",G=function(K){K.each(function(M,L){if(i(this).attr("lay-href")===F){i(this).addClass(m);i(this).parent("dd").addClass(I).siblings().removeClass(I);return false}})};J.find("."+m).removeClass(m);if(n.screen()<2){n.sideFlexible()}G(J.find("*[lay-href]"))});f.on("nav(layadmin-system-side-menu)",function(E){if(E.siblings(".layui-nav-child")[0]&&p.hasClass(c)){n.sideFlexible("spread");layer.close(E.data("index"))}n.tabsPage.type="nav"});f.on("nav(layadmin-pagetabs-nav)",function(F){var E=F.parent();E.removeClass(m);E.parent().removeClass(h)});var k=function(H){var G=H.attr("lay-id"),E=H.attr("lay-attr"),F=H.index();n.tabsBodyChange(F,{url:E})},A="#LAY_app_tabsheader>li";u.on("click",A,function(){var F=i(this),E=F.index();n.tabsPage.type="tab";n.tabsPage.index=E;k(F)});f.on("tabDelete("+w+")",function(F){var E=i(A+".layui-this");F.index&&n.tabsBody(F.index).remove();k(E);n.delResize()});u.on("click","*[lay-href]",function(){if(i(this).hasClass("layui-btn-disabled")){return false}if(i(this).attr("lay-href").length==0){return false}if("undefined"!=typeof event&&event.ctrlKey==1){window.open(i(this).attr("lay-href"));return false}var H=i(this),G=H.attr("lay-href"),I=H.attr("lay-text"),F=layui.router();n.tabsPage.elem=H;var E=parent===self?layui:top.layui;E.index.openTabsPage(G,I||H.text());n.autoprevnextbutton()});u.on("click","*[layadmin-event]",function(){var F=i(this),E=F.attr("layadmin-event");b[E]&&b[E].call(this,F)});u.on("mouseenter","*[lay-tips]",function(){var G=i(this);if(G.parent().hasClass("layui-nav-item")&&!p.hasClass(c)){return}var E=G.attr("lay-tips"),I=G.attr("lay-offset"),H=G.attr("lay-direction"),F=layer.tips(E,this,{tips:H||1,time:-1,success:function(J,K){if(I){J.css("margin-left",I+"px")}}});G.data("index",F)}).on("mouseleave","*[lay-tips]",function(){layer.close(i(this).data("index"))});var q=layui.data.resizeSystem=function(){layer.closeAll("tips");if(!q.lock){setTimeout(function(){n.sideFlexible(n.screen()<2?"":"spread");delete q.lock},100)}n.autoprevnextbutton();q.lock=true};r.on("resize",layui.data.resizeSystem);D("admin",n)});
